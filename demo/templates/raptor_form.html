<!DOCTYPE html>
<html lang="en">

    <head>
        <title>{{version_name}}</title>
    </head>

    <body>
        <h1> {{version_name}} </h1>
        <div class="container">
            <form action="/{{action}}" method="POST">

                <div id="or">
                    <label>Choose origin:</label>
                    <select name="origin">
                        {% for stop_name in stop_names %}
                        <option  value="{{stop_name}}">{{stop_name}}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                </div>

                <div id="dest">
                    <label>Choose destination:</label>
                    <select name="destination">
                        {% for stop_name in stop_names %}
                            <option  value="{{stop_name}}">{{stop_name}}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                </div>

                <div id="t">
                    <label>Choose departure time:</label>
                    <input type="time" name="time" min="00:00" max="23:59" required>
                    <br><br>
                </div>

                <!-- Show shared mob input only if shared mob is enabled-->
                {% if enable_sm %}

                <div id="p">
                    <label>Choose preferred vehicle:</label>
                        <select name="preferred">
                            {% for vehicle in vehicles %}
                                <option  value="{{vehicle.id_}}">{{vehicle.name}}</option>
                            {% endfor %}
                        </select>
                    <br><br>
                </div>

                <div id="c">
                    <label> Use car </label>
                    <input type="checkbox" name="car" checked>
                    <br><br>
                </div>

                {% endif %}

                <input type="submit" value="Run">
            </form>
            <a href="/home">Back</a>
        </div>
    </body>

</html>

<script>
    // Set default value of time inputs to current time
    let date = new Date();
    let curr_time = String(date.getHours()).padStart(2, '0') + ":" + String(date.getMinutes()).padStart(2, '0');

    let inputs = document.getElementsByTagName('input')
    inputs = [].slice.call(inputs) // cast to array
    let time_inputs = inputs.filter(el => el.type === 'time')
    for(let time of time_inputs) {
        time.value = curr_time
    }
</script>
