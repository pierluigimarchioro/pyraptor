<!DOCTYPE html>
<html lang="en">

<style>

    html {
        background: url('https://www.creativefabrica.com/wp-content/uploads/2020/07/02/Modern-City-Silhouette-Skyscrapers-Graphics-4523478-1.jpg') no-repeat center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }

    body {font-family: Arial, Helvetica, sans-serif;} * {box-sizing: border-box;}

    input[type=time], select {
        width: 100%;
        padding: 12px;
        border: 1px solid rgba(255, 0, 217, 0.86);
        border-radius: 4px;
        box-sizing: border-box;
        margin-top: 6px;
        margin-bottom: 16px;
        resize: vertical;
        color: rgb(84, 0, 84);
        background-color: #ffffffda;
    }

    label {
        color: rgb(255, 230, 248);
    }

    .title {
        align-items: center;
        display: flex;
        justify-content: center;
        color: rgba(194, 0, 158, 0.9);
        font-family: sans-serif;
        font-size: 36px;
        font-weight: 600;
        margin-top: 5px;
        margin-bottom: 30px;
    }

    input[type=submit] {
        background-color: rgba(194, 0, 158, 0.9);
        color: white;
        margin-left: 35%;
        text-align: center;
        width: 30%;
        height: 100%;
        font-size: large;
        position: center;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        alignment: center;
        padding-top: 10px;
        padding-bottom: 10px;
    }

    input[type=submit]:hover {
        background-color: rgba(172, 0, 141, 0.9);
    }

    .container {
        margin-left: auto;
        margin-right: auto;
        margin-top: 50px;
        alignment: center;
        height: 50%;
        width: 50%;
        border-radius: 5px;
        background-image: linear-gradient(rgba(63, 0, 66, 0.975), rgba(122, 0, 129, 0.975));
        padding: 20px;
        border-style: solid;
        border-width: 5px;
        border-color: rgb(120, 27, 103);
    }

    #cb1 {
        margin-top: 10px;
        scale: 110%;
        accent-color: #9b59b6;
    }
    
    a[href] {
        padding-left: 5px;
        color:rgb(227, 227, 227);
        font-size: large;
        text-decoration: none;
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
    }

    a[href]:hover {
        color: rgb(255, 170, 212);
    }


</style>

    <head>
        <title>{{version_name}}</title>
    </head>

    <body>

        <div class="container">
            <form action="/{{action}}" method="POST">
                <div class="title">{{version_name}}</div>
                <div id="or">
                    <label>Choose origin:</label>
                    <select name="origin">
                        {% for stop_name in stop_names %}
                        <option  value="{{stop_name}}">{{stop_name}}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                </div>

                <div id="dest">
                    <label>Choose destination:</label>
                    <select name="destination">
                        {% for stop_name in stop_names %}
                            <option  value="{{stop_name}}">{{stop_name}}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                </div>

                <div id="t">
                    <label>{% if enable_sm %} Departure just now {% else %} Choose departure time {% endif %}:</label>
                    <input type="time" name="time" min="00:00" max="23:59" required>
                    <br><br>
                </div>

                <!-- Show shared mob input only if shared mob is enabled-->
                {% if enable_sm %}

                <div id="p">
                    <label>Choose preferred vehicle:</label>
                        <select name="preferred">
                            {% for vehicle in vehicles %}
                                <option  value="{{vehicle.id_}}">{{vehicle.name}}</option>
                            {% endfor %}
                        </select>
                    <br><br>
                </div>

                <div id="c">
                    <label> Use car:
                        <input type="checkbox" id="cb1" name="car" checked>
                    </label>
                    <br><br>
                </div>

                {% endif %}

                <input type="submit" value="Run">
            </form>
            <br><br>
            <a href="/home">Back</a>
        </div>
    </body>

</html>

<script>
    // Set default value of time inputs to current time
    let date = new Date();
    let curr_time = String(date.getHours()).padStart(2, '0') + ":" + String(date.getMinutes()).padStart(2, '0');

    let inputs = document.getElementsByTagName('input')
    inputs = [].slice.call(inputs); // cast to array
    let time_inputs = inputs.filter(el => el.type === 'time')
    for(let time of time_inputs) {
        time.value = curr_time;
    }

    if ({{enable_sm|tojson}}) {
        let select = document.createElement("select");
        select.id = "t";
        select.name = "time"
        option = document.createElement("option");
        option.value = curr_time;
        option.text = curr_time;
        select.appendChild(option);
        for(let time of time_inputs) {
            time.parentNode.insertBefore(select, time.nextSibling);
            time.parentNode.removeChild(time)
        }

    }
</script>
